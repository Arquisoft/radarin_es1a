
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.16.0/HERE_NOTICE
 */

H.util.eval("gg.prototype.Mc=ca(1,function(a,b){this.a.Mc(a,Bc(b)?b:this.c)});kg.prototype.Mc=ca(0,function(a,b){var c=0,d;if(!a(this)&&b--)for(;3>=c;c++)(d=this[c])&&d.Mc(a,b)});function qt(a,b,c){this.f=this.c=c;this.ci=[];this.a=0;this.L=cg(a,b,!0)}t(\"H.clustering.grid.Cluster\",qt);qt.prototype.je=function(a){this.b||(this.b=Yf(a));this.a+=a.wt||1;this.ci.push(a)};qt.prototype.ya=function(){return this.b};qt.prototype.getPosition=qt.prototype.ya;qt.prototype.xc=function(){return this.a};qt.prototype.getWeight=qt.prototype.xc;qt.prototype.md=cf;qt.prototype.isCluster=qt.prototype.md;qt.prototype.tc=function(){return this.c};qt.prototype.getMinZoom=qt.prototype.tc;\nqt.prototype.If=function(){return this.f};qt.prototype.getMaxZoom=qt.prototype.If;qt.prototype.F=function(){return this.L};qt.prototype.getBoundingBox=qt.prototype.F;qt.prototype.Zg=function(a){this.te(a)};qt.prototype.forEachEntry=qt.prototype.Zg;qt.prototype.te=function(a){var b=this;if(!Ba(a))throw new D(this.te,0,a);this.ci.forEach(function(c){a(new rt(c,b.c+1))})};qt.prototype.forEachDataPoint=qt.prototype.te;function st(a){md.call(this);this.a=[];var b;a?Va(b={},tt,a):b=tt;this.g=b;md.call(this)}u(st,md);var ut={clusters:[],noisePoints:[]},tt={projection:li,min:0,max:22,eps:32,minWeight:2};n=st.prototype;n.Gc=function(a){this.a=a;this.b=!0};n.Gb=function(a){this.a.push(a);this.b=!0};n.nf=function(a){this.a=this.a.concat(a);this.b=!0};n.Se=function(a){this.a=this.a.filter(function(b){return b!==a});this.b=!0};n.u=function(){st.l.u.call(this);this.a=null};n.Kk=hd;function rt(a,b){this.a=a;this.b=b}t(\"H.clustering.grid.NoisePoint\",rt);rt.prototype.ya=function(){return Yf(this.a)};rt.prototype.getPosition=rt.prototype.ya;rt.prototype.xc=function(){return this.a.wt};rt.prototype.getWeight=rt.prototype.xc;rt.prototype.md=df;rt.prototype.isCluster=rt.prototype.md;rt.prototype.tc=function(){return this.b};rt.prototype.getMinZoom=rt.prototype.tc;rt.prototype.getData=function(){return this.a.data};rt.prototype.getData=rt.prototype.getData;function vt(a){st.call(this,a)}u(vt,st);\nvt.prototype.Di=function(a){var b=this.g,c=b.min,d=b.max,e=[],f=[],g;if(this.b){for(g=this.a;c<=d;c++){for(var h,k=void 0,l,m,q,p,r,v,w,z=c,J=g,G=e,V=f,S=b.eps,ra=b.projection,da=b.minWeight,Zb=J.length,qb=Math.pow(2,z+8),Yc=[];w=J[--Zb];)if(!w.Mi){m=ra.Kb(w).scale(qb).floor();v=qb;r=m.x;p=m.y;for(l=Yc.length;l--;)h=Yc[l],q=h.ya(),h.Li||(h.Li=ra.Kb(q).scale(qb).floor()),q=h.Li,q=q.Ya(m),q<v&&(v=q,k=h);k&&k.F().Cd(w)||(k=new qt(ra.bg({x:(r-S)/qb,y:(p-S)/qb}),ra.bg({x:(r+S)/qb,y:(p+S)/qb}),z),Yc.push(k));\nk.je(w);k=null}for(Zb=Yc.length;Zb--;)if(h=Yc[Zb],l=h.xc(),l<da)for(h=h.ci,l=h.length;w=h[--l];)V.push(new rt(w,z)),w.Mi=!0;else G.push(h)}c=0;for(d=g.length;c<d;c++)delete g[c].Mi;this.b=!1;a({clusters:e,noisePoints:f})}};function wt(a){this.a=a;a=document.createElement(\"canvas\");var b=a.getContext(\"2d\"),c=this.a,d=14*c;a.width=d;a.height=d;b.scale(c,c);b.beginPath();b.strokeStyle=\"#FFFFFF\";b.fillStyle=\"#1080DD\";b.arc(7,7,6,0,2*Math.PI,!1);b.fill();b.lineWidth=1;b.stroke();this.f=new uj(a,{size:{w:14,h:14},anchor:{x:7,y:7}});this.b={};this.c={}}t(\"H.clustering.theme.Circular\",wt);\nfunction xt(a,b,c){var d,e=document.createElement(\"canvas\"),f=e.getContext(\"2d\");var g=a.a;var h=b*g;e.width=h;e.height=h;f.scale(g,g);g=b+\":\"+c;(d=a.b[g])?f.putImageData(d,0,0):(b/=2,f.beginPath(),f.strokeStyle=\"rgba(\"+c+\",0.2)\",f.fillStyle=\"rgba(\"+c+\",1)\",f.arc(b,b,b/5*3,0,2*Math.PI,!1),f.fill(),f.lineWidth=b/5*4,f.stroke(),a.b[g]=f.getImageData(0,0,h,h));return e}\nwt.prototype.$l=function(a){var b=a.xc();var c=this.c[b];if(!c){if(10>b){c=xt(this,28,\"118,209,0\");var d={x:11,y:18}}else 25>b?(c=xt(this,38,\"255,105,0\"),d={x:13,y:23}):50>b?(c=xt(this,38,\"240,60,0\"),d={x:13,y:23}):100>b?(c=xt(this,38,\"181,0,21\"),d={x:13,y:23}):1E3>b?(c=xt(this,48,\"181,0,21\"),d={x:15,y:28}):(c=xt(this,66,\"181,0,21\"),d={x:20,y:38});var e=c.getContext(\"2d\");e.fillStyle=\"#FFFFFF\";e.font=\"bold 11px Arial\";e.fillText(b,d.x,d.y);d=c.width/this.a;c=new uj(c,{size:{w:d,h:d},anchor:{x:d/2,\ny:d/2}});this.c[b]=c}b=new xn(a.ya(),{icon:c,min:a.tc(),max:a.If()});b.setData(a);return b};wt.prototype.getClusterPresentation=wt.prototype.$l;wt.prototype.Fm=function(a){var b=new xn(a.ya(),{icon:this.f,min:a.tc()});b.setData(a);return b};wt.prototype.getNoisePresentation=wt.prototype.Fm;function yt(a){st.call(this,a);a=this.g;if(a.projection!==li)throw new D(yt,0,\"Other projection than mercator not supported yet\");this.m=a.projection;this.f=a.eps;this.s=a.minWeight;this.o=new mi(this.m);(new Lf).a(\"cluster\",\"H.clustering.dynamicgrid.worker\");this.i=A(this.i,this);this.j=A(this.j,this)}u(yt,st);yt.prototype.Kk=function(a,b){this.v=a;this.ia=xd(b)};\nyt.prototype.Di=function(a,b){var c=this.c;var d=this.v,e=this.ia||0;var f=!c||!(c.zoom===e&&c.b.la(d));if(d&&(this.b||f)){c&&3>c.Xd&&c.cancel();this.b=!1;c=this.f;if(c>=128*Cd(2,e))var g=zt;else{f=this.o;f.Ba(e);var h=f.ib(d.Ob());g=f.ib(d.Lb());h.y-=c;g.y+=c;h=f.Ne(h);var k=f.Ne(g);g=new K(h.lat,h.lng,k.lat,k.lng);c=f.Oa(c,0).lng+180;g=g.Ac(h.lat,h.lng-c,k.lat,h.lng).Ac(h.lat,k.lng,k.lat,k.lng+c)}c=g;h=this.a;g=[];for(f=h.length;f--;)c.Cd(h[f])&&g.push(h[f]);0<g.length?(this.c=new At(d,e,g,this.f,\nthis.s,this.m!==li,a,b),this.c.then(this.i,this.j)):a(ut)}};yt.prototype.i=function(a){Aa(a)||(a=new x.Uint32Array(a));this.c.g(Bt(this,a))};yt.prototype.j=function(a){yc(a)&&this.c.f(a)};var zt=new K(90,-180,-90,180);\nfunction Bt(a,b){for(var c=0,d=b[c++],e=Array(d),f=0,g=[],h=b.length,k=a.c.a,l=a.c.zoom;d--;)e[f++]=new rt(k[b[c++]],l);for(;c<h;){d=b[c++];f=k[b[c]];var m=a.o;var q=a.f;m.Ba(a.c.zoom);var p=m.ib(f);f=m.Oa(p.x-q,p.y-q);m=m.Oa(p.x+q,p.y+q);f=new K(f.lat,f.lng,m.lat,m.lng);for(f=new qt(f.Ob(),f.Lb(),l);d--;)f.je(k[b[c++]]);g.push(f)}return{clusters:g,noisePoints:e}}yt.prototype.u=function(){yt.l.u.call(this)};\nfunction At(a,b,c,d,e,f,g,h){this.b=a;this.zoom=b;this.a=c;this.g=g;this.f=h;a=c.length;g=3*a;h=new (x.Float64Array||Array)(g);for(var k;a--;)k=c[a],h[--g]=k.lat,h[--g]=k.lng,h[--g]=k.wt;de.call(this,\"cluster\",{message:[h,d,e,b,f]},void 0)}u(At,Pf);function Ct(a,b,c){this.c=a;this.a=b;this.f=c}t(\"H.clustering.fastgrid.NoisePoint\",Ct);Ct.prototype.ya=function(){this.b||(this.b=this.c.Oa(this.a[1],this.a[0],1));return this.b};Ct.prototype.getPosition=Ct.prototype.ya;Ct.prototype.xc=function(){return this.a.a};Ct.prototype.getWeight=Ct.prototype.xc;Ct.prototype.md=df;Ct.prototype.isCluster=Ct.prototype.md;Ct.prototype.tc=function(){return this.f-this.c.c};Ct.prototype.getMinZoom=Ct.prototype.tc;Ct.prototype.getData=function(){return this.a.data};\nCt.prototype.getData=Ct.prototype.getData;function Dt(a,b,c,d){this.c=a;this.a=b;this.j=c;this.o=d;this.g=Ha(this.g,this);this.f=Ha(this.f,this)}t(\"H.clustering.fastgrid.Cluster\",Dt);Dt.prototype.ya=function(){this.b||(this.b=this.c.Oa(this.a.me,this.a.ne,this.a.Ib));return this.b};Dt.prototype.getPosition=Dt.prototype.ya;Dt.prototype.xc=function(){return this.a.Ib};Dt.prototype.getWeight=Dt.prototype.xc;Dt.prototype.md=cf;Dt.prototype.isCluster=Dt.prototype.md;Dt.prototype.tc=function(){return this.j?this.j-this.c.c:-1/0};\nDt.prototype.getMinZoom=Dt.prototype.tc;Dt.prototype.If=function(){return this.o-this.c.c};Dt.prototype.getMaxZoom=Dt.prototype.If;Dt.prototype.F=function(){this.L||(this.L=cg(this.c.Oa(this.a.a,this.a.f,1),this.c.Oa(this.a.b,this.a.c,1),!0));return this.L};Dt.prototype.getBoundingBox=Dt.prototype.F;Dt.prototype.Zg=function(a){this.i=a;this.a.Mc(this.g,Sd)};Dt.prototype.forEachEntry=Dt.prototype.Zg;\nDt.prototype.g=function(a,b){var c=!1,d,e;a.Ib>=this.c.m&&a!==this.a&&a.Ib!==this.a.Ib&&(this.i(new Dt(this.c,a,0,b)),c=!0);if(!c&&(d=a.entries))for(a=d.length,e=0;e<a;e++)this.i(new Ct(this.c,d[e],b));return c};Dt.prototype.te=function(a){this.m=a;this.a.Mc(this.f,Sd)};Dt.prototype.forEachDataPoint=Dt.prototype.te;Dt.prototype.f=function(a,b){var c;if(a=a.entries){var d=a.length;for(c=0;c<d;c++)this.m(new Ct(this.c,a[c],b))}return!1};function Et(a,b,c,d,e,f){this.g=b;a&&(this.parent=a,b&1?(c=a[8],e=a[5]):(c=a[7],e=a[8]),b&2?(d=a[9],f=a[6]):(d=a[4],f=a[9]));this[7]=c;this[5]=e;this[8]=(c+e)/2;this[4]=d;this[6]=f;this[9]=(d+f)/2}n=Et.prototype;n.Wd=0;function Ft(a,b){return a[b]||(++a.Wd,a[b]=new Et(a,b))}n.removeChild=function(a){var b=a.g;this[b]===a&&(delete this[b],delete a.parent,--this.Wd)};n.Mc=function(a,b){for(var c=0,d=this;d=d.parent;)++c;Gt(this,a,b,c)};\nfunction Gt(a,b,c,d){var e,f;if(!b(a,d)&&c--)for(++d,e=0;4>e;e++)(f=a[e])&&Gt(f,b,c,d)}n.me=0;n.ne=0;n.Ib=0;function Ht(a){this.b=a||10;this.a=null;It(this)}function It(a){a.head=a.a=new Et(null,NaN,0,0,4294967296,4294967296)}function Jt(a,b){var c,d;for(c=0;4>c;c++)if(d=b[c])Jt(a,d),delete b[c];delete b.parent;delete b.entries}function Kt(a,b){var c=a.head,d;if(b){var e=b;if(e!==c)for(c=e;e=e.parent;)if(e.entries||1<e.Wd)c=e}else for(;!c.entries&&2>(d=c.Wd);)if(d)c=e;else break;a.head=c}\nHt.prototype.yc=function(a,b,c,d){var e=this.a;if(!(a>=e[7]&&b>=e[4]&&a<=e[5]&&b<=e[6]))throw Error(\"Coordinates out of bounds\");return Lt(this,this.a,a,b,c,this.b,d)};\nfunction Lt(a,b,c,d,e,f,g){var h=b.entries;if(f)if(b.Wd)h=Lt(a,Ft(b,c>=b[8]|(d>=b[9])<<1),c,d,e,f-1,g);else if(h){h=h[0];var k=Ft(b,h[1]>=b[8]|(h[0]>=b[9])<<1);k.entries=b.entries;k.me=b.me;k.ne=b.ne;k.Ib=b.Ib;k.a=b.a;k.f=b.f;k.b=b.b;k.c=b.c;delete b.entries;h.node=k;Kt(a,k);h=Lt(a,Ft(b,c>=b[8]|(d>=b[9])<<1),c,d,e,f-1,g)}else f=h=new Mt(c,d,e,g),(b.entries||(b.entries=[])).push(f),Kt(a,b);else h||Kt(a,b),a=h=new Mt(c,d,e,g),(b.entries||(b.entries=[])).push(a);b.me+=c*e;b.ne+=d*e;b.Ib+=e;b.a===B?(b.a=\nb.b=c,b.f=b.c=d):(c<b.a?b.a=c:c>b.b&&(b.b=c),d<b.f?b.f=d:d>b.c&&(b.c=d));return h}Ht.prototype.Mc=function(a,b){Gt(this.a,a,b===+b?b:this.b,0)};function Mt(a,b,c,d){this[0]=b;this[1]=a;this.a=c;this.data=d};function Nt(a){st.call(this,a);a=this.g;this.j=a.projection;this.o=a.min;this.f=a.max;this.m=a.minWeight;this.c=7-wd(Ad(vd(1,a.eps))/Kd);this.i=new Ht(vd(this.o,this.f+this.c))}u(Nt,st);n=Nt.prototype;n.Gc=function(a){var b=0,c=a.length,d,e=new I(0,0),f=this.j,g=this.i;Nt.l.Gc.call(this,a);Jt(g,g.a);for(It(g);b<c;b++)f.Kb(d=a[b],e).scale(4294967296).floor(),g.yc(e.x,e.y,d.wt,d.data);this.b=!0};n.Gb=function(a){Nt.l.Gb.call(this,a);this.Gc(this.a)};\nn.nf=function(a){for(var b=a.length,c=Nt.l.Gb;b--;)c.call(this,a[b]);this.Gc(this.a)};n.Se=function(a){Nt.l.Se.call(this,a);this.Gc(this.a)};n.Oa=function(a,b,c,d){return this.j.Oa(a/c/4294967296,b/c/4294967296,d)};n.Di=function(a){if(this.b){var b={clusters:[],noisePoints:[]};Ot(this,this.i.a,0,this.f+this.c,-1/0,b,null);this.b=!1;a(b)}};\nfunction Ot(a,b,c,d,e,f,g){var h=b.Ib,k;g&&(g.node.Ib!==h?(f.clusters.push(new Dt(a,g.node,g.depth,c-1)),g=null):e++);g||(h>=a.m?(g={node:b,depth:c},e=c):Pt(a,b,e+1,f));if(b.Wd&&d--)for(c++,h=0;4>h;h++)if(k=b[h])Ot(a,k,c,d,e,f,g),g=null;g&&f.clusters.push(new Dt(a,g.node,g.depth,a.f+a.c))}function Pt(a,b,c,d){b=b.entries;var e;if(b){var f=b.length;d=d.noisePoints;for(e=0;e<f;e++)d.push(new Ct(a,b[e],c))}else for(e=0;4>e;e++)(f=a[e])&&Pt(a,f,c,d)}n.u=function(){Nt.l.u.call(this);this.i=null};function Qt(a,b,c,d){this.lat=a;this.lng=b;this.wt=c===+c?c:1;this.data=d}t(\"H.clustering.DataPoint\",Qt);Qt.prototype.a=NaN;Qt.prototype.b=NaN;function Rt(a,b){b=b||{};var c={},d=b.min||0,e=vd(d,b.max||22);d={min:d,max:e};Rt.l.constructor.call(this,d);this.Fb=b.pixelRatio||Re();Va(c,tt,d,b.clusteringOptions||{});c.minWeight=vd(tt.minWeight,c.minWeight);switch(c.strategy){case St.DYNAMICGRID:if(c.projection!==li)throw new D(Rt,1,\"Unsupported projection\");this.a=new yt(c);break;case St.GRID:this.a=new vt(c);break;default:this.a=new Nt(c)}this.a.Gc(a);this.G=b.theme||new wt(this.Fb);this.ea=A(this.ea,this);this.Xa=A(this.Xa,this);Tt(this)}\nu(Rt,N);t(\"H.clustering.Provider\",Rt);Rt.prototype.u=function(){Rt.l.u.call(this);this.b.qa();this.a.B();this.G=this.K=this.a=null;x.clearTimeout(this.U)};var St={FASTGRID:0,GRID:1,DYNAMICGRID:2};Rt.Strategy=St;Rt.prototype.ea=function(){this.dispatchEvent(\"start\");this.a.Di(this.Xa,hd)};function Tt(a,b,c){a.U&&x.clearTimeout(a.U);b&&a.a.Kk(b,c);a.U=x.setTimeout(a.ea,150)}Rt.prototype.Xa=function(a){this.dispatchEvent(\"end\");this.K=a;Ut(this)};Rt.prototype.Gc=function(a){this.a.Gc(a);Tt(this)};\nRt.prototype.setDataPoints=Rt.prototype.Gc;Rt.prototype.Gb=function(a){this.a.Gb(a);Tt(this)};Rt.prototype.addDataPoint=Rt.prototype.Gb;Rt.prototype.nf=function(a){this.a.nf(a);Tt(this)};Rt.prototype.addDataPoints=Rt.prototype.nf;Rt.prototype.Se=function(a){this.a.Se(a);Tt(this)};Rt.prototype.removeDataPoint=Rt.prototype.Se;Rt.prototype.Vm=function(){return this.G};Rt.prototype.getTheme=Rt.prototype.Vm;Rt.prototype.eo=function(a){this.G=a;this.K&&(this.b.qa(),Ut(this))};Rt.prototype.setTheme=Rt.prototype.eo;\nfunction Ut(a){var b=a.K.clusters,c=a.K.noisePoints,d=b.length,e=c.length,f=0<d+e;for(a.b.qa();d--;){var g=b[d];a.b.ca(a.G.getClusterPresentation(g))}for(;e--;)b=c[e],a.b.ca(a.G.getNoisePresentation(b));f&&Yj(a)}Rt.prototype.Sb=function(){return!0};Rt.prototype.providesDomMarkers=Rt.prototype.Sb;Rt.prototype.Tb=function(){return!0};Rt.prototype.providesMarkers=Rt.prototype.Tb;Rt.prototype.Bc=function(){return!0};Rt.prototype.providesSpatials=Rt.prototype.Bc;\nRt.prototype.di=function(a,b){Tt(this,a,b)};t(\"H.clustering.buildInfo\",function(){return Df(\"H-clustering\",\"1.16.0\",\"32f6469\")});\n");